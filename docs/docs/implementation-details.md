
Once running, the homecage system should be simple to use. Yet, for this simple system to work, a number of independent components must each work and must communicate with each other. As is often the case, the implementation details to create a simple system is complex. Two cliches to describe this is 'you can't fly with half a wing' and 'the devil is in the details'.

We have about 15 components in use! Each component is developed independently and all are open source. It is amazing that this system works? What follows is a description of the different pieces of the homecage system with links to the source code and the components that are used.

## Raspberry Pi system

Don't forget the Raspberry Pi! It is open-source hardware made by the [Raspberry Pi Foundation][raspberry]. It is running a variant of the [Debian][debian] operating system called [Raspbian][raspbian].

## Documentation
 
This website is written in [markdown][markdown]. The markdown and a description of the contents using [yaml][yaml] are brought together, compiled, and a static site is generated by [mkdocs][mkdocs]. The final layout is controlled by an mkdocs theme called [material][material-theme].
 
## Front end

 - [index.html][index.html] - Main web interface written in [html][html], uses [Angular][angular] to provide dynamic and real-time content.
 
 - [videolist.html][videolist.html] - Again, an html web page but this time using [Jinja][jinja] as a template engine. Jinja is default template engine used by Flask.

 - [hello.js][hello.js] - [Javascript][javascript] code that implementes the logic of the web interface. Has functions that get called when user is clicking. Also has function to talk to [homecage_app.py] web server via a [REST][rest] interface. This is not standard Javascript but is using the [Angular][angular] library.
 
 - [hello.css][hello.css] - A [Cascading Style Sheet (css)][css] text file that describes the precise layout of the web pages.
    
## Back end
 
 - [home.py][home.py] - The [python][python] engine that runs everything. This includes controlling DIO pins to turn lights on/off, running bash scripts to start/stop the video and to convert .h264 video files to .mp4. This code also provides an interface to all these components such that the web server in `homecage_app.py` has an easier job.
 
 - [homecage_app.py][homecage_app.py] - Python code that uses the [Flask][flask] library to run the web-server and dispatch user clicks and web addresses.
 
 - [config.json][config.json] - A text file written in [json][json] that provides human editable configuration options for the server.

    
## uv4l
 - [stream][stream] - [Bash shell][bash] script to start stop streaming with the [uv4l][uv4l] library.
 
## avconv
 - [convert_video.sh][convert_video.sh] - Bash shell script to convert a .h264 video file into .mp4. Uses avconv function which is part of [libav][avconv] library.

[raspberry]: https://www.raspberrypi.org/
[debian]: https://www.debian.org/
[raspbian]: https://www.raspberrypi.org/downloads/raspbian/
[python]: https://www.python.org/
[markdown]: https://en.wikipedia.org/wiki/Markdown
[mkdocs]: http://www.mkdocs.org/
[yaml]: http://yaml.org/
[material-theme]: https://github.com/squidfunk/mkdocs-material
[home.py]: https://github.com/cudmore/homecage/blob/master/homecage_app/home.py
[homecage_app.py]: https://github.com/cudmore/homecage/blob/master/homecage_app/homecage_app.py
[config.json]: https://github.com/cudmore/homecage/blob/master/homecage_app/config.json
[hello.js]: https://github.com/cudmore/homecage/blob/master/homecage_app/static/hello.js
[hello.css]: https://github.com/cudmore/homecage/blob/master/homecage_app/static/hello.css
[index.html]: https://github.com/cudmore/homecage/blob/master/homecage_app/templates/index.html
[videolist.html]: https://github.com/cudmore/homecage/blob/master/homecage_app/templates/videolist.html
[stream]: https://github.com/cudmore/homecage/blob/master/homecage_app/stream
[convert_video.sh]: https://github.com/cudmore/homecage/blob/master/homecage_app/convert_video.sh
[flask]: http://flask.pocoo.org/
[json]: https://www.json.org/
[javascript]: https://www.javascript.com/
[rest]: https://en.wikipedia.org/wiki/Representational_state_transfer
[css]: https://www.w3schools.com/css/css_intro.asp
[html]: https://en.wikipedia.org/wiki/HTML
[angular]: https://angularjs.org/
[jinja]: http://jinja.pocoo.org/
[bash]: https://www.gnu.org/software/bash/
[uv4l]: https://www.linux-projects.org/uv4l/
[avconv]: https://libav.org/avconv.html