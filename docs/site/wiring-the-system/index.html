



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Wiring the system - Home cage</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#camera" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Home cage" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Home cage
              </span>
              <span class="md-header-nav__topic">
                Wiring the system
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/cudmore/homecage/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Home cage
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/cudmore/homecage/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installing-the-software/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install-extras/" title="Install extras" class="md-nav__link">
      Install extras
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../web-interface/" title="Web interface" class="md-nav__link">
      Web interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rest-interface/" title="REST interface" class="md-nav__link">
      REST interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../command-line/" title="Command line interface" class="md-nav__link">
      Command line interface
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../videowall/" title="Video wall" class="md-nav__link">
      Video wall
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Wiring the system
      </label>
    
    <a href="./" title="Wiring the system" class="md-nav__link md-nav__link--active">
      Wiring the system
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#camera" title="Camera" class="md-nav__link">
    Camera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raspberry-pi-b23-pinout" title="Raspberry Pi B+/2/3 pinout" class="md-nav__link">
    Raspberry Pi B+/2/3 pinout
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5v-and-ground-pins" title="5V and ground pins" class="md-nav__link">
    5V and ground pins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lights" title="Lights" class="md-nav__link">
    Lights
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch" title="Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch." class="md-nav__link">
    Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-the-pi-to-the-relay-switch-switch" title="Connect the Pi to the relay switch switch" class="md-nav__link">
    Connect the Pi to the relay switch switch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dht-22-temperature-sensor" title="DHT 22 temperature sensor" class="md-nav__link">
    DHT 22 temperature sensor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combined-visible-and-ir-light-sensor" title="Combined visible and IR light sensor" class="md-nav__link">
    Combined visible and IR light sensor
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../parts-list/" title="Parts list" class="md-nav__link">
      Parts list
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../images/" title="Images" class="md-nav__link">
      Images
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../implementation-details/" title="Implementation details" class="md-nav__link">
      Implementation details
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dev-notes/" title="Development notes" class="md-nav__link">
      Development notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../open-source/" title="Open source" class="md-nav__link">
      Open source
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#camera" title="Camera" class="md-nav__link">
    Camera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raspberry-pi-b23-pinout" title="Raspberry Pi B+/2/3 pinout" class="md-nav__link">
    Raspberry Pi B+/2/3 pinout
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#5v-and-ground-pins" title="5V and ground pins" class="md-nav__link">
    5V and ground pins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lights" title="Lights" class="md-nav__link">
    Lights
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch" title="Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch." class="md-nav__link">
    Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-the-pi-to-the-relay-switch-switch" title="Connect the Pi to the relay switch switch" class="md-nav__link">
    Connect the Pi to the relay switch switch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dht-22-temperature-sensor" title="DHT 22 temperature sensor" class="md-nav__link">
    DHT 22 temperature sensor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combined-visible-and-ir-light-sensor" title="Combined visible and IR light sensor" class="md-nav__link">
    Combined visible and IR light sensor
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="http://github.com/cudmore/homecage/edit/master/docs/wiring-the-system.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Wiring the system</h1>
                
                <h2 id="camera">Camera</h2>
<p>It is worth while checking out the <a href="https://www.raspberrypi.org/documentation/hardware/camera/">specs</a> as they are impressive.</p>
<p>Attach the camera to the Pi with a flat ribbon cable. The cable should have blue tabs on one side of each end. The blue tab goes towards the ethernet port on the Pi and towards the back of the camera (away from the lens). In the picture below, you can't see the blue side of the ribbon as it is toward the ethenret port and towards the back of the camera.</p>
<p><IMG SRC="../img/pi-noir-camera.png" width=400></p>
<h2 id="raspberry-pi-b23-pinout">Raspberry Pi B+/2/3 pinout</h2>
<p><IMG SRC="../img/raspberry-pin-out.png" width=600></p>
<p>The image above is a schematic of the layout of the pins on the Raspberry Pi. Each of the yellow numbered pins are digital input/output (DIO) pins. Your free to attach each component to the pin numbers of your choice. Just be sure that the pin numbers specified in the <a href="https://github.com/cudmore/homecage/blob/master/homecage_app/config.json">config.json</a> file match the way you wired the system.</p>
<p>Here are all the connections you want to make to set up the homecage system</p>
<table>
<thead>
<tr>
<th>Pin from Raspberry</th>
<th align="center">To</th>
<th align="right">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>8</td>
<td align="center">In1 on relay</td>
<td align="right">White LED</td>
</tr>
<tr>
<td>7</td>
<td align="center">In2 on relay</td>
<td align="right">IR LED</td>
</tr>
<tr>
<td>5 V</td>
<td align="center">Vcc on relay</td>
<td align="right">Power 5V end of relay switch</td>
</tr>
<tr>
<td>Ground</td>
<td align="center">GND Relay</td>
<td align="right">Power 5V end of relay switch</td>
</tr>
<tr>
<td>9</td>
<td align="center">DATA pin on DHT sensor</td>
<td align="right">Read temperature/humidity from DHT sensor</td>
</tr>
<tr>
<td>5 V</td>
<td align="center">VCC pin on DHT sensor</td>
<td align="right">Power DHT sensor</td>
</tr>
<tr>
<td>Ground</td>
<td align="center">GND pin on DHT sensor</td>
<td align="right">Power DHT sensor</td>
</tr>
</tbody>
</table>
<h3 id="5v-and-ground-pins">5V and ground pins</h3>
<p>There are multiple power and ground pins, use these to connect to the relay switch, the temperature sensor, and the light sensor. Conceptually, all the ground pins are the same, you can use a <a href="https://www.adafruit.com/product/64?gclid=CjwKCAiA9f7QBRBpEiwApLGUijY03SkJ-mU-7PzpacD5HT3Y4dMM7gbnNP1328raTCGwOq8OPo4NjxoC67YQAvD_BwE">bread-board</a> if you run out of ground pins.</p>
<h2 id="lights">Lights</h2>
<p><strong>Use an external 12V AC/DC power supply.</strong> - Don't power the lights directly from the 5V pins on the Pi, the Pi does not have anough current. A 1 Amp 12V adapter should be fine, don't worry, if it is under-powered your lights will be a little dim.</p>
<p><strong>Use a relay switch.</strong> - Never connect the 12V adapter directly to the Pi, instead use a relay switch. Only work with DC current coming out of the AC/DC adapter, <strong>DO NOT</strong> work with AC power coming from the wall as it can kill you.</p>
<p>The relay switch effectively separates the 5V, Ground, and DIO on the Pi (left half of the relay) from the 12V power of the AC/DC adapter and the lights (right half of the relay). Here we will wire the system with the white LED on channel 1 and the IR LED on channel 2 of the relay switch. </p>
<p><strong>All LEDs need resistors.</strong> - All LEDs need resistors. If your directly connect an LED to power and ground without a resistor you will burn the LED. All LEDs need a resistor wired in parallel, these are called 'current limiting resistor'.</p>
<p><strong>Use IR LEDs &lt;900 nm.</strong> - These are within the sensitivity range of the Pi NoIR camera. A lot of IR LEDs are 940nm, these are not well suited for use with the Pi NoIR camera but are designed for IR sensors as is used in a TV remote.</p>
<p><IMG SRC="../img/two-channel-relay.png" width=600></p>
<h3 id="connect-a-12v-acdc-adapter-ir-and-white-lights-to-the-two-channel-relay-switch">Connect a 12V AC/DC adapter, IR, and white lights to the two-channel relay switch.</h3>
<p>All LEDs need resistors!</p>
<ul>
<li>
<p>Using a 12V AC/DC adapter (1 Amp), cut the wire and stick the positive 'hot' wire into the center 'common' pin' of channel 1 on the relay switch. The 'hot' end wire usually has a white line down the length of the wire. You can also determine the 'hot' end using a multi-meter, it is the one that gives a positive (not negative) voltage when attached to the positive (normally red) end of the multi-meter.</p>
</li>
<li>
<p>Cut a bit of wire and connect the center 'common pin' of channel 1 to the center 'common pin' of channel 2. This is the 'hot' end.</p>
</li>
<li>
<p>Stick the positive end of the white LED into the 'normally closed' port of channel 1. Attach the negative end of the white LED to the 'ground' wire of the 12V AC/DC adapter.</p>
</li>
<li>
<p>Do the same for the IR LED. Stick the positive end into the 'normally closed' port of channel 2 on the relay switch. Attach the negative end of the IR LED to the 'ground' wire of the 12V AC/DC adapter.</p>
</li>
</ul>
<p>One important concept is that 'all grounds are the same'. This includes the ground on the 12V AC/DC adapter, the ground of the LEDs, the ground of theRaspberry Pi, etc.</p>
<h3 id="connect-the-pi-to-the-relay-switch-switch">Connect the Pi to the relay switch switch</h3>
<p>Connect 4 wires from the Pi to the relay switch.</p>
<ul>
<li>
<p>Connect a DIO pin from the Pi to the 'In1=Digital Input' pin on the relay switch.</p>
</li>
<li>
<p>Connect a second DIO pin from the Pi to the 'In2=Digital Input' pin on the relay switch.</p>
</li>
<li>
<p>Connect a 5V pin from the Pi to the 'Vcc' pin on the relay switch.</p>
</li>
<li>
<p>Connect a ground pin from the Pi to the 'GND' pin on the relay switch.</p>
</li>
</ul>
<h2 id="dht-22-temperature-sensor">DHT 22 temperature sensor</h2>
<p>This is powered by the Raspberry Pi. Connect 3 wires from the Pi to the sensor.</p>
<ul>
<li>
<p>Connect a 5V pin from the pi to the 'VCC' pin on the sensor.</p>
</li>
<li>
<p>Connect a ground pin from the Pi to the 'GND' pin on the sensor.</p>
</li>
<li>
<p>Connect a DIO pin from the Pi to the 'DATA' pin on the sensor.</p>
</li>
</ul>
<p><IMG SRC="../img/dht22-pin-out.png" width=300></p>
<h2 id="combined-visible-and-ir-light-sensor">Combined visible and IR light sensor</h2>
<p>This is powered by the Raspberry Pi. One example is a <a href="https://www.adafruit.com/product/1777">SI1145 Digital UV Index / IR / Visible Light Sensor</a>. Your on your own to wire this.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../videowall/" title="Video wall" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Video wall
              </span>
            </div>
          </a>
        
        
          <a href="../parts-list/" title="Parts list" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Parts list
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Homecage was created by Robert H Cudmore and is licensed under the <a href='https://github.com/cudmore/treadmill/blob/master/LICENSE'>MIT license</a>
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>